<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIARENÉ | Luxury Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --p: #ff4d6d; --d: #1a1a1a; --glass: rgba(255, 255, 255, 0.7); }
        body { font-family: 'Outfit', sans-serif; margin: 0; background: #fff; color: var(--d); overflow-x: hidden; }
        
        /* Fondo Animado */
        .bg-gradient {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(45deg, #fff5f7, #ffffff, #ffe0e6);
            background-size: 400% 400%; z-index: -1; animation: gradient 15s ease infinite;
        }
        @keyframes gradient { 0% {background-position: 0% 50%;} 50% {background-position: 100% 50%;} 100% {background-position: 0% 50%;} }

        header { 
            background: var(--glass); backdrop-filter: blur(20px);
            padding: 20px 8%; display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid rgba(255,77,109,0.1);
        }
        .logo { font-size: 2.5rem; font-weight: 900; color: var(--d); text-decoration: none; letter-spacing: -3px; }
        .logo span { color: var(--p); }

        .hero { padding: 80px 8%; text-align: center; }
        .hero h2 { font-size: 4rem; margin: 0; font-weight: 900; line-height: 1; letter-spacing: -2px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 40px; padding: 0 8% 80px; }
        
        .card { 
            background: white; border-radius: 40px; overflow: hidden; position: relative;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 40px rgba(0,0,0,0.02);
        }
        .card:hover { transform: translateY(-20px) scale(1.02); box-shadow: 0 40px 80px rgba(255, 77, 109, 0.2); }
        
        .card img { width: 100%; height: 450px; object-fit: cover; transition: 0.6s; }
        .card:hover img { transform: scale(1.1); }

        .overlay { 
            position: absolute; bottom: 0; width: 100%; background: linear-gradient(to top, white, transparent);
            padding: 30px; text-align: center; 
        }
        .btn-add { 
            background: var(--d); color: white; border: none; padding: 18px 40px; 
            border-radius: 20px; font-weight: 900; cursor: pointer; transition: 0.3s;
            width: 80%; font-size: 1rem;
        }
        .btn-add:hover { background: var(--p); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(255,77,109,0.3); }

        #count { background: var(--p); color: white; padding: 5px 12px; border-radius: 50px; font-size: 0.9rem; margin-left: 10px; }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>
    <header class="animate__animated animate__fadeInDown">
        <a href="/" class="logo">CIARE<span>NÉ</span></a>
        <a href="/carrito" style="text-decoration:none; color:var(--d); font-weight:900;">
            BOLSA <span id="count">0</span>
        </a>
    </header>

    <div class="hero animate__animated animate__zoomIn">
        <p style="color:var(--p); font-weight:900; letter-spacing:5px;">COLECCIÓN 2026</p>
        <h2>Vístete con <br> Propósito.</h2>
    </div>

    <div class="grid" id="lista"></div>

    <script>
        let prods = [];
        let cart = JSON.parse(localStorage.getItem('cart_ciarene')) || [];

        async function load() {
            const res = await fetch('/api/productos');
            prods = await res.json();
            document.getElementById('lista').innerHTML = prods.map((p, i) => `
                <div class="card animate__animated animate__fadeInUp" style="animation-delay: ${i*0.2}s">
                    <img src="${p.imagen}">
                    <div class="overlay">
                        <small style="color:var(--p); font-weight:900; letter-spacing:2px;">${p.categoria}</small>
                        <h3 style="margin:5px 0 15px;">${p.nombre}</h3>
                        <p style="font-size:1.5rem; font-weight:900; margin-bottom:20px;">$${p.precio.toLocaleString()}</p>
                        <button class="btn-add" onclick="add(${p.id})">Añadir a la Bolsa</button>
                    </div>
                </div>`).join('');
            document.getElementById('count').innerText = cart.length;
        }

        function add(id) {
            cart.push(prods.find(x => x.id === id));
            localStorage.setItem('cart_ciarene', JSON.stringify(cart));
            document.getElementById('count').innerText = cart.length;
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.8 }, colors: ['#ff4d6d', '#1a1a1a'] });
        }
        load();
    </script>
</body>
</html>
