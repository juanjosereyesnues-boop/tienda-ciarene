<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Carrito</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit'; background: #fff5f7; padding: 40px 5%; }
        .box { background: white; max-width: 500px; margin: auto; border-radius: 40px; padding: 40px; box-shadow: 0 30px 60px rgba(0,0,0,0.1); }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .btn-wa { width: 100%; padding: 20px; background: #25D366; color: white; border: none; border-radius: 50px; font-weight: 800; cursor: pointer; font-size: 1.2rem; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="box">
        <h1>Tu Pedido ðŸŒ¸</h1>
        <div id="lista"></div>
        <h2 id="total" style="text-align:right"></h2>
        <button class="btn-wa" onclick="enviar()">Enviar a WhatsApp</button>
        <a href="/" style="display:block; text-align:center; margin-top:20px; color:#aaa; text-decoration:none;">Volver</a>
    </div>
    <script>
        let cart = JSON.parse(localStorage.getItem('cart_ciarene')) || [];
        function render() {
            let t = 0;
            document.getElementById('lista').innerHTML = cart.map((p, i) => {
                t += p.precio;
                return `<div class="item"><span>${p.nombre} (${p.talla})</span><b>$${p.precio.toLocaleString()}</b><button onclick="borrar(${i})" style="border:none; background:none; color:red; cursor:pointer;">X</button></div>`;
            }).join('');
            document.getElementById('total').innerText = "Total: $" + t.toLocaleString();
        }
        function borrar(i) { cart.splice(i,1); localStorage.setItem('cart_ciarene', JSON.stringify(cart)); render(); }
        function enviar() {
            const msg = encodeURIComponent("Â¡Hola CiarenÃ©! Quiero pedir:\n" + cart.map(p => `- ${p.nombre} (${p.talla})`).join('\n') + "\n\nTotal: " + document.getElementById('total').innerText);
            window.location.href = "https://wa.me/573000000000?text=" + msg;
        }
        render();
    </script>
</body>
</html>
